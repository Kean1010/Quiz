<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Demo - Quiz Party</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 mt-10">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">Firebase Integration Demo</h1>
        
        <div class="mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">What This Demo Shows</h2>
            <p class="text-gray-600 mb-4">
                This simple demo shows how Firebase can be used to store and retrieve data in real-time,
                which is essential for making your Quiz Party app work across different devices.
            </p>
        </div>
        
        <div class="mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">Test Firebase Connection</h2>
            <div class="space-y-4">
                <div>
                    <label for="test-data" class="block text-gray-700 font-medium mb-2">Enter some text:</label>
                    <input type="text" id="test-data" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Type something...">
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button id="save-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors">
                        <i class="fa fa-save mr-2"></i> Save to Firebase
                    </button>
                    <button id="load-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition-colors">
                        <i class="fa fa-refresh mr-2"></i> Load from Firebase
                    </button>
                </div>
            </div>
        </div>
        
        <div class="mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-2">Result</h2>
            <div id="result" class="bg-gray-50 p-4 rounded-md min-h-20">
                <p class="text-gray-500 italic">Click the buttons above to see results here...</p>
            </div>
        </div>
        
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4">
            <div class="flex">
                <div class="flex-shrink-0">
                    <i class="fa fa-info-circle text-blue-400"></i>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-blue-700">
                        This is a simplified demo. The actual Quiz Party integration is more complex but follows the same principles:
                        saving data to Firebase and listening for changes in real-time.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // Replace with your actual Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT.firebaseapp.com",
            databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
            projectId: "YOUR_PROJECT",
            storageBucket: "YOUR_PROJECT.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        const saveBtn = document.getElementById('save-btn');
        const loadBtn = document.getElementById('load-btn');
        const testDataInput = document.getElementById('test-data');
        const resultDiv = document.getElementById('result');
        
        function updateResult(message) {
            resultDiv.innerHTML = `<p class="text-gray-800">${message}</p>`;
        }
        
        saveBtn.addEventListener('click', () => {
            const data = testDataInput.value.trim();
            if (!data) {
                updateResult('<span class="text-red-500">Please enter some text first.</span>');
                return;
            }
            
            updateResult('<span class="text-blue-500">Saving to Firebase...</span>');
            
            // Save data to Firebase
            database.ref('demo/test-data').set({
                message: data,
                timestamp: firebase.database.ServerValue.TIMESTAMP
            })
            .then(() => {
                updateResult(`<span class="text-green-500">‚úÖ Data saved successfully!</span>`);
            })
            .catch(error => {
                updateResult(`<span class="text-red-500">‚ùå Error saving data: ${error.message}</span>`);
            });
        });
        
        loadBtn.addEventListener('click', () => {
            updateResult('<span class="text-blue-500">Loading from Firebase...</span>');
            
            // Load data from Firebase
            database.ref('demo/test-data').once('value')
                .then(snapshot => {
                    const data = snapshot.val();
                    if (data) {
                        const date = new Date(data.timestamp);
                        updateResult(`
                            <div>
                                <p class="font-medium">Message: ${data.message}</p>
                                <p class="text-sm text-gray-500">Saved at: ${date.toLocaleString()}</p>
                            </div>
                        `);
                    } else {
                        updateResult('<span class="text-yellow-500">No data found in Firebase.</span>');
                    }
                })
                .catch(error => {
                    updateResult(`<span class="text-red-500">‚ùå Error loading data: ${error.message}</span>`);
                });
        });
        
        // Set up real-time listener
        database.ref('demo/test-data').on('value', snapshot => {
            const data = snapshot.val();
            if (data) {
                const date = new Date(data.timestamp);
                const now = new Date();
                const timeDiff = now - date;
                
                // Only show real-time updates if the data was changed recently (within 5 seconds)
                // This prevents showing the update when we first load the page
                if (timeDiff < 5000 && timeDiff > 0) {
                    updateResult(`
                        <div class="bg-green-100 p-2 rounded">
                            <p class="font-medium text-green-800">üîÑ Real-time update received!</p>
                            <p class="text-sm text-green-700">Message: ${data.message}</p>
                            <p class="text-xs text-green-600">Updated at: ${date.toLocaleString()}</p>
                        </div>
                    `);
                }
            }
        });
    </script>
</body>
</html>